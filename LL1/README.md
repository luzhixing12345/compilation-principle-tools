# LL1文法

LL1文法的求解过程并不复杂,基于[FIRST-FOLLOW-SELECT集求解](../FIRST-FOLLOW-SELECT/README.md)得到SELECT集

## 编译

```bash
cd LL1
make
```

## 使用方法

我在该文件夹下提供了一个示例文件 `grammar.txt`,执行

```bash
main.exe grammar.txt
```

此时会要求输入一个字符串,即需要推导的字符串,这里举例为 `(a,a)`

```txt
---------------------
SUCCESS to calculate ffs set
---------------------
|-------------|-------------|-------------|-------------|-------------|
|      +      |      (      |      )      |      ,      |      a      |
|-------------|-------------|-------------|-------------|-------------|
|      S      |  S -> (L)   |             |             |   S -> a    |
|-------------|-------------|-------------|-------------|-------------|
|      L      |   L -> ST   |             |             |   L -> ST   |
|-------------|-------------|-------------|-------------|-------------|
|      T      |             |   T -> e    |  T -> ,ST   |             |
|-------------|-------------|-------------|-------------|-------------|

Please input the string: (a,a)

|residual str |analysis stk |analysis act |
|-------------|-------------|-------------|
|   (a,a)$    |     S$      |  S -> (L)   |
|-------------|-------------|-------------|
|   (a,a)$    |    (L)$     |    MATCH    |
|-------------|-------------|-------------|
|    a,a)$    |     L)$     |   L -> ST   |
|-------------|-------------|-------------|
|    a,a)$    |    ST)$     |   S -> a    |
|-------------|-------------|-------------|
|    a,a)$    |    aT)$     |    MATCH    |
|-------------|-------------|-------------|
|    ,a)$     |     T)$     |  T -> ,ST   |
|-------------|-------------|-------------|
|    ,a)$     |    ,ST)$    |    MATCH    |
|-------------|-------------|-------------|
|     a)$     |    ST)$     |   S -> a    |
|-------------|-------------|-------------|
|     a)$     |    aT)$     |    MATCH    |
|-------------|-------------|-------------|
|     )$      |     T)$     |   T -> e    |
|-------------|-------------|-------------|
|     )$      |     )$      |    MATCH    |
|-------------|-------------|-------------|
|      $      |      $      |    MATCH    |
|-------------|-------------|-------------|
---------------------
SUCCESS to calculate LL1 analysis action
---------------------
```

该过程显示了构造的LL1分析表和分析栈的推导过程.

`grammar.txt`中需要写入当前的文法,一些细节可以参考求解first-follow-select集的[README](../FIRST-FOLLOW-SELECT/README.md)

自适应边框大小,无需担心过长的文法导致终端输出混乱

## 冲突处理

如果分析表中存在冲突则会输出一个存在冲突的LL1分析表,然后提示存在冲突

对于接受的字符串,如果存在LL1冲突项,那么提示异常并且退出

> 这里解释一下,虽然说LL1分析表即使存在冲突可以使用回溯的方法做判断处理,但是考虑到大部分编译器都不使用回溯所以这里也没有处理,如果是做题的话一般来说就人眼就能判断出来了.

例如对于一个存在冲突的文法 `test.txt`,输入语句为 `a[*a]` 会得到如下错误信息

```txt
---------------------
SUCCESS to calculate ffs set
---------------------
|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|
|           +           |           $           |           *           |           [           |           ]           |           a           |
|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|
|           E           |                       |       E -> *ET        |                       |                       |        E -> aT        |
|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|
|           T           |        T -> e         |                       |  T -> [E]T | T -> e   |        T -> e         |                       |
|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|-----------------------|

There is collision in the select set.

Please input the string: a[*a]

Detected LL1 collision.

There are 2 rules when [ meets T
T -> [E]T
T -> e

|     residual str      |     analysis stk      |     analysis act      |
|-----------------------|-----------------------|-----------------------|
|        a[*a]$         |          E$           |        E -> aT        |
|-----------------------|-----------------------|-----------------------|
|        a[*a]$         |          aT$          |         MATCH         |
|-----------------------|-----------------------|-----------------------|
|         [*a]$         |          T$           |         MATCH         |
|-----------------------|-----------------------|-----------------------|
---------------------
RUN_TIME_ERROR
---------------------
```
